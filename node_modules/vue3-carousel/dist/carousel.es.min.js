/**
 * Vue 3 Carousel 0.5.1
 * (c) 2024
 * @license MIT
 */
import{Fragment as e,defineComponent as t,inject as a,reactive as n,ref as l,h as i,computed as o,provide as r,onMounted as u,nextTick as s,onUnmounted as c,watch as d,cloneVNode as v}from"vue";const p=["center","start","end","center-even","center-odd"],m=["viewport","carousel"],g=["ltr","rtl"],f={itemsToShow:1,itemsToScroll:1,modelValue:0,transition:300,autoplay:0,throttle:16,wrapAround:!1,pauseAutoplayOnHover:!1,mouseDrag:!0,touchDrag:!0,snapAlign:p[0],dir:g[0],breakpointMode:m[0],breakpoints:void 0,i18n:{ariaNextSlide:"Navigate to next slide",ariaPreviousSlide:"Navigate to previous slide",ariaNavigateToSlide:"Navigate to slide {slideNumber}",ariaGallery:"Gallery",itemXofY:"Item {currentSlide} of {slidesCount}",iconArrowUp:"Arrow pointing upwards",iconArrowDown:"Arrow pointing downwards",iconArrowRight:"Arrow pointing to the right",iconArrowLeft:"Arrow pointing to the left"}},b={itemsToShow:{default:f.itemsToShow,type:Number},itemsToScroll:{default:f.itemsToScroll,type:Number},wrapAround:{default:f.wrapAround,type:Boolean},throttle:{default:f.throttle,type:Number},snapAlign:{default:f.snapAlign,validator:e=>p.includes(e)},transition:{default:f.transition,type:Number},breakpointMode:{default:f.breakpointMode,validator:e=>m.includes(e)},breakpoints:{default:f.breakpoints,type:Object},autoplay:{default:f.autoplay,type:Number},pauseAutoplayOnHover:{default:f.pauseAutoplayOnHover,type:Boolean},modelValue:{default:void 0,type:Number},mouseDrag:{default:f.mouseDrag,type:Boolean},touchDrag:{default:f.touchDrag,type:Boolean},dir:{default:f.dir,validator:e=>g.includes(e)},i18n:{default:f.i18n,type:Object}};function w({val:e,max:t,min:a}){return t<a?e:Math.min(Math.max(e,a),t)}function h(t){return t?t.reduce(((t,a)=>{var n;return a.type===e?[...t,...h(a.children)]:"CarouselSlide"===(null===(n=a.type)||void 0===n?void 0:n.name)?[...t,a]:t}),[]):[]}function x({val:e,max:t,min:a=0}){const n=t-a+1;return((e-a)%n+n)%n+a}function S(e="",t={}){return Object.entries(t).reduce(((e,[t,a])=>e.replace(`{${t}}`,String(a))),e)}var y,_=t({name:"ARIA",setup(){const e=a("config",n(Object.assign({},f))),t=a("currentSlide",l(0)),o=a("slidesCount",l(0));return()=>i("div",{class:["carousel__liveregion","carousel__sr-only"],"aria-live":"polite","aria-atomic":"true"},S(e.i18n.itemXofY,{currentSlide:t.value+1,slidesCount:o.value}))}}),A=t({name:"Carousel",props:b,setup(e,{slots:t,emit:a,expose:p}){var m;const g=l(null),S=l([]),y=l(0),A=l(0),T=o((()=>Object.assign(Object.assign(Object.assign({},f),e),{i18n:Object.assign(Object.assign({},f.i18n),e.i18n),breakpoints:void 0}))),C=n(Object.assign({},T.value)),k=l(null!==(m=e.modelValue)&&void 0!==m?m:0),M=l(0),O=l(0),L=l(0),N=l(0);let j=null,D=null,E=null;function I(){var t;if(!e.breakpoints)return;const a=("carousel"===C.breakpointMode?null===(t=g.value)||void 0===t?void 0:t.getBoundingClientRect().width:window.innerWidth)||0,n=Object.keys(e.breakpoints||{}).map((e=>Number(e))).sort(((e,t)=>+t-+e));let l=Object.assign({},T.value);n.some((t=>{var n;return a>=t&&(l=Object.assign(Object.assign({},l),null===(n=e.breakpoints)||void 0===n?void 0:n[t]),!0)})),Object.assign(C,l)}r("config",C),r("slidesCount",A),r("currentSlide",k),r("maxSlide",L),r("minSlide",N),r("slideWidth",y);const R=function(e,t){let a;return function(...n){a&&clearTimeout(a),a=setTimeout((()=>{e(...n),a=null}),t)}}((()=>{I(),X(),B()}),16);function B(){if(!g.value)return;const e=g.value.getBoundingClientRect();y.value=e.width/C.itemsToShow}function X(){A.value<=0||(O.value=Math.ceil((A.value-1)/2),L.value=function({config:e,slidesCount:t}){const{snapAlign:a,wrapAround:n,itemsToShow:l=1}=e;if(n)return Math.max(t-1,0);let i;switch(a){case"start":i=t-l;break;case"end":i=t-1;break;case"center":case"center-odd":i=t-Math.ceil((l-.5)/2);break;case"center-even":i=t-Math.ceil(l/2);break;default:i=0}return Math.max(i,0)}({config:C,slidesCount:A.value}),N.value=function({config:e,slidesCount:t}){const{wrapAround:a,snapAlign:n,itemsToShow:l=1}=e;let i=0;if(a||l>t)return i;switch(n){case"start":default:i=0;break;case"end":i=l-1;break;case"center":case"center-odd":i=Math.floor((l-1)/2);break;case"center-even":i=Math.floor((l-2)/2)}return i}({config:C,slidesCount:A.value}),C.wrapAround||(k.value=w({val:k.value,max:L.value,min:N.value})))}u((()=>{s((()=>B())),setTimeout((()=>B()),1e3),I(),J(),window.addEventListener("resize",R,{passive:!0}),E=new ResizeObserver(R),g.value&&E.observe(g.value),a("init")})),c((()=>{D&&clearTimeout(D),j&&clearInterval(j),E&&g.value&&(E.unobserve(g.value),E=null),window.removeEventListener("resize",R,{passive:!0})}));let z=!1;const V={x:0,y:0},$={x:0,y:0},P=n({x:0,y:0}),U=l(!1),Y=l(!1),H=()=>{U.value=!0},W=()=>{U.value=!1};function G(e){["INPUT","TEXTAREA","SELECT"].includes(e.target.tagName)||(z="touchstart"===e.type,z||e.preventDefault(),!z&&0!==e.button||Q.value||(V.x=z?e.touches[0].clientX:e.clientX,V.y=z?e.touches[0].clientY:e.clientY,document.addEventListener(z?"touchmove":"mousemove",q),document.addEventListener(z?"touchend":"mouseup",F)))}const q=function(e,t){let a;return t?function(...n){const l=this;a||(e.apply(l,n),a=!0,setTimeout((()=>a=!1),t))}:e}((e=>{Y.value=!0,$.x=z?e.touches[0].clientX:e.clientX,$.y=z?e.touches[0].clientY:e.clientY;const t=$.x-V.x,a=$.y-V.y;P.y=a,P.x=t}),C.throttle);function F(){const e="rtl"===C.dir?-1:1,t=.4*Math.sign(P.x),a=Math.round(P.x/y.value+t)*e;if(a&&!z){const e=t=>{t.preventDefault(),window.removeEventListener("click",e)};window.addEventListener("click",e)}Z(k.value-a),P.x=0,P.y=0,Y.value=!1,document.removeEventListener(z?"touchmove":"mousemove",q),document.removeEventListener(z?"touchend":"mouseup",F)}function J(){!C.autoplay||C.autoplay<=0||(j=setInterval((()=>{C.pauseAutoplayOnHover&&U.value||ee()}),C.autoplay))}function K(){j&&(clearInterval(j),j=null),J()}const Q=l(!1);function Z(e){const t=C.wrapAround?e:w({val:e,max:L.value,min:N.value});k.value===t||Q.value||(a("slide-start",{slidingToIndex:e,currentSlideIndex:k.value,prevSlideIndex:M.value,slidesCount:A.value}),Q.value=!0,M.value=k.value,k.value=t,D=setTimeout((()=>{if(C.wrapAround){const n=x({val:t,max:L.value,min:0});n!==k.value&&(k.value=n,a("loop",{currentSlideIndex:k.value,slidingToIndex:e}))}a("update:modelValue",k.value),a("slide-end",{currentSlideIndex:k.value,prevSlideIndex:M.value,slidesCount:A.value}),Q.value=!1,K()}),C.transition))}function ee(){Z(k.value+C.itemsToScroll)}function te(){Z(k.value-C.itemsToScroll)}const ae={slideTo:Z,next:ee,prev:te};r("nav",ae),r("isSliding",Q);const ne=o((()=>function({config:e,currentSlide:t,slidesCount:a}){const{snapAlign:n,wrapAround:l,itemsToShow:i=1}=e;let o=t;switch(n){case"center":case"center-odd":o-=(i-1)/2;break;case"center-even":o-=(i-2)/2;break;case"end":o-=i-1}return l?o:w({val:o,max:a-i,min:0})}({config:C,currentSlide:k.value,slidesCount:A.value})));r("slidesToScroll",ne);const le=o((()=>{const e="rtl"===C.dir?-1:1,t=ne.value*y.value*e;return{transform:`translateX(${P.x-t}px)`,transition:`${Q.value?C.transition:0}ms`,margin:C.wrapAround?`0 -${A.value*y.value}px`:"",width:"100%"}}));function ie(){I(),X(),B(),K()}Object.keys(b).forEach((t=>{["modelValue"].includes(t)||d((()=>e[t]),ie)})),d((()=>e.modelValue),(e=>{e!==k.value&&Z(Number(e))})),d(A,X),a("before-init");const oe={config:C,slidesCount:A,slideWidth:y,next:ee,prev:te,slideTo:Z,currentSlide:k,maxSlide:L,minSlide:N,middleSlide:O};p({updateBreakpointsConfig:I,updateSlidesData:X,updateSlideWidth:B,restartCarousel:ie,slideTo:Z,next:ee,prev:te,nav:ae,data:oe});const re=t.default||t.slides,ue=t.addons,se=n(oe);return()=>{const e=h(null==re?void 0:re(se)),t=(null==ue?void 0:ue(se))||[];e.forEach(((e,t)=>e.props.index=t));let a=e;if(C.wrapAround){const t=e.map(((t,a)=>v(t,{index:-e.length+a,isClone:!0,key:`clone-before-${a}`}))),n=e.map(((t,a)=>v(t,{index:e.length+a,isClone:!0,key:`clone-after-${a}`})));a=[...t,...e,...n]}S.value=e,A.value=Math.max(e.length,1);const n=i("ol",{class:"carousel__track",style:le.value,onMousedownCapture:C.mouseDrag?G:null,onTouchstartPassiveCapture:C.touchDrag?G:null},a),l=i("div",{class:"carousel__viewport"},n);return i("section",{ref:g,class:{carousel:!0,"is-sliding":Q.value,"is-dragging":Y.value,"is-hover":U.value,"carousel--rtl":"rtl"===C.dir},dir:C.dir,"aria-label":C.i18n.ariaGallery,tabindex:"0",onMouseenter:H,onMouseleave:W},[l,t,i(_)])}}});!function(e){e.arrowUp="arrowUp",e.arrowDown="arrowDown",e.arrowRight="arrowRight",e.arrowLeft="arrowLeft"}(y||(y={}));const T={arrowUp:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z",arrowDown:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z",arrowRight:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z",arrowLeft:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"};const C=e=>{const t=a("config",n(Object.assign({},f))),l=String(e.name),o=`icon${l.charAt(0).toUpperCase()+l.slice(1)}`;if(!l||"string"!=typeof l||!(l in y))return;const r=i("path",{d:T[l]}),u=t.i18n[o]||e.title||l,s=i("title",u);return i("svg",{class:"carousel__icon",viewBox:"0 0 24 24",role:"img","aria-label":u},[s,r])};C.props={name:String,title:String};const k=(e,{slots:t,attrs:o})=>{const{next:r,prev:u}=t||{},s=a("config",n(Object.assign({},f))),c=a("maxSlide",l(1)),d=a("minSlide",l(1)),v=a("currentSlide",l(1)),p=a("nav",{}),{dir:m,wrapAround:g,i18n:b}=s,w="rtl"===m;return[i("button",{type:"button",class:["carousel__prev",!g&&v.value<=d.value&&"carousel__prev--disabled",null==o?void 0:o.class],"aria-label":b.ariaPreviousSlide,title:b.ariaPreviousSlide,onClick:p.prev},(null==u?void 0:u())||i(C,{name:w?"arrowRight":"arrowLeft"})),i("button",{type:"button",class:["carousel__next",!g&&v.value>=c.value&&"carousel__next--disabled",null==o?void 0:o.class],"aria-label":b.ariaNextSlide,title:b.ariaNextSlide,onClick:p.next},(null==r?void 0:r())||i(C,{name:w?"arrowLeft":"arrowRight"}))]},M=()=>{const e=a("config",n(Object.assign({},f))),t=a("maxSlide",l(1)),o=a("minSlide",l(1)),r=a("currentSlide",l(1)),u=a("nav",{}),s=e=>x({val:r.value,max:t.value,min:0})===e,c=[];for(let a=o.value;a<t.value+1;a++){const t=S(e.i18n.ariaNavigateToSlide,{slideNumber:a+1}),n=i("button",{type:"button",class:{"carousel__pagination-button":!0,"carousel__pagination-button--active":s(a)},"aria-label":t,title:t,onClick:()=>u.slideTo(a)}),l=i("li",{class:"carousel__pagination-item",key:a},n);c.push(l)}return i("ol",{class:"carousel__pagination"},c)};var O=t({name:"CarouselSlide",props:{index:{type:Number,default:1},isClone:{type:Boolean,default:!1}},setup(e,{slots:t}){const r=a("config",n(Object.assign({},f))),u=a("currentSlide",l(0)),s=a("slidesToScroll",l(0)),c=a("isSliding",l(!1)),d=o((()=>e.index===u.value)),v=o((()=>e.index===u.value-1)),p=o((()=>e.index===u.value+1)),m=o((()=>{const t=Math.floor(s.value),a=Math.ceil(s.value+r.itemsToShow-1);return e.index>=t&&e.index<=a}));return()=>{var a;return i("li",{style:{width:100/r.itemsToShow+"%"},class:{carousel__slide:!0,"carousel__slide--clone":e.isClone,"carousel__slide--visible":m.value,"carousel__slide--active":d.value,"carousel__slide--prev":v.value,"carousel__slide--next":p.value,"carousel__slide--sliding":c.value},"aria-hidden":!m.value},null===(a=t.default)||void 0===a?void 0:a.call(t,{isActive:d.value,isClone:e.isClone,isPrev:v.value,isNext:p.value,isSliding:c.value,isVisible:m.value}))}}});export{A as Carousel,C as Icon,k as Navigation,M as Pagination,O as Slide};
